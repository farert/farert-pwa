# **<きっぷホルダー>** 画面（ドロワーナビゲーション）の詳細仕様

- ドロワーナビゲーション（コンポーネント）

## 呼び出し画面

- **<メイン>** 画面
  - ``[ハンバーガーメニュー]``

## 入力パラメーター

- ``route as 経路``

## 基本レイアウト

- 幅: 画面の8割程度
- 構成: 上部固定エリア（25%） + スクロール可能なリストエリア

## 上部固定エリア（25%）

### ヘッダー部

- 左上: アイコン <images/tickfolder3.png>
- タイトル: きっぷホルダ

### 集計表示部

- 総運賃: 全行の運賃合計（最大7桁）
  - 運賃タイプが ``[無効]``の行は0円として計算
- 総営業キロ: 全行の営業キロ合計（最大6桁）例：_¥999,000_

### 操作部

- 左側: ``[共有]``アイコン（``<ShareIcon />``）: タップできっぷホルダ全体を共有
- 右側: ``[追加≪]``ボタン: メイン画面の経路をきっぷホルダに追加
  - メイン画面の経路が空の場合は非表示
  - 同一経路の重複追加も可能

## リストエリア（スクロール可能）

### カード表示形式（2段行、2段列）

```
発駅 - 着駅             営業キロ
[運賃タイプ]            運賃        [>]
```

``[運賃タイプ]`` は、ピッカーで後述

例:

```
剣淵 - 旭川              45.2km
[普通運賃]             ¥1,210      [>]
```

### 通常表示モード

- 左端: 空白
- 右端: `>` アイコン
- タップ動作: メイン画面がその経路表示に切り替わる

### 並べ替え（ドラッグアンドドロップ）

カードリスト表示時、常にドラッグハンドルが表示される:

- 右端: ``[>]`` の手前に横3本線アイコン（ドラッグハンドル、MDI: `drag-horizontal-variant`）
- ドラッグで行の並び替えが可能（編集モード不要）
- 並び替え順は `order` フィールドで管理
- 並び替え後は自動的にlocalStorageに保存

### 削除機能

カードの左上に ``[×]`` ボタン表示:

- タップでそのカードをきっぷホルダから削除
- 確認ダイアログなし（即座に削除）

### 運賃タイプ ピッカー

#### 表示形式

- 角丸矩形に囲われた表示

#### 選択肢

1. `普通運賃`
2. `小児運賃`
3. `往復`
4. `株割`
5. `株割x2`
6. `学割`
7. `学割往復`
8. `無効`

- デフォルト表示は `普通運賃`

### 動作

- ピッカーの選択を切り替えると「運賃タイプ」により、[集計表示部] の表示の総運賃、総営業キロが変わる

## データ制約

- 最大営業キロ: 6桁
- 最大運賃: 7桁

## データソース

- 運賃タイプ変更による運賃計算
  - `wasm.calcRoute(route: string, option: FareCalcOption) : FareInfo`
