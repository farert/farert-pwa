# 詳細画面（結果表示画面）の詳細仕様

## 画面構成

スクロール可能なテーブル形式で、以下のセクションを表示

## セクション1: 区間

### タイトル行
- 背景色: サブタイトルバー色
- 太字表示: "区間"

### 値行
- センタリング表示
- フォーマット: 発駅 → 着駅（例: _東京 → 熱海_）

## セクション2: キロ程

### タイトル行
- 背景色: サブタイトルバー色
- 太字表示: "キロ程"

### 営業キロ・計算キロ行（2列x2行）

基本表示（営業キロ = 計算キロの場合）:
```
営業キロ              | xxx.x km
```

計算キロ異なる場合:
```
営業キロ              | xxx.x km | 計算キロ(JR) | xxx.x km
```

### JR各社別キロ程（条件付き表示）

JR北海道営業キロ（0でない場合）:
```
JR北海道             | xxx.x km | （計算キロ）  | xxx.x km
```

JR九州営業キロ（0でない場合）:
```
JR九州               | xxx.x km | （計算キロ）  | xxx.x km
```

JR四国営業キロ（0でない場合）:
```
JR四国               | xxx.x km | （計算キロ）  | xxx.x km
```

### 規程114条適用（条件付き表示）

規程114条が適用される場合:
```
規程114条適用         | xxx.x km | (計算キロ)    | xxx.x km
```

### JR線・会社線・BRT線の内訳（条件付き表示）

会社線とBRT線両方ある場合:
```
JR線                 | xxx.x km | 会社線        | xxx.x km
BRT線                | xxx.x km |               |
```

会社線のみの場合:
```
JR線                 | xxx.x km | 会社線        | xxx.x km
```

BRT線のみの場合:
```
JR線                 | xxx.x km | BRT線         | xxx.x km
```

## セクション3: 運賃

### タイトル行
- 背景色: サブタイトルバー色
- 太字表示: "運賃"

### 普通運賃行（2列x2行）

基本表示（会社線・IC・BRTなし）:
```
普通                  | ¥x,xxx
```

会社線運賃がある場合:
```
普通                  | ¥x,xxx   | うち会社線    | ¥xxx
```

IC運賃がある場合:
```
普通                  | ¥x,xxx   | IC運賃        | ¥x,xxx
```

BRT運賃がある場合:
```
普通                  | ¥x,xxx   | うちBRT線     | ¥xxx
うちBRT              | ¥xxx     |               |
```

### 往復運賃行（片道営業キロ ≥ 601km の場合のみ表示）

基本往復:
```
往復                  | ¥x,xxx
```

往復割引適用時:
```
往復                  | ¥x,xxx (割引)
```

会社線・IC・BRT含む場合:
```
往復                  | ¥x,xxx (割引) | (会社線往復) | ¥xxx
```

### 規程114条 適用しない運賃（条件付き表示）

規程114条適用時:
```
規程114条 適用しない運賃 | (¥x,xxx)
```

### 株主優待割引運賃（条件付き・動的表示）

JR各社の株主優待が利用可能な場合:
```
JR東日本 株主優待4割   | ¥x,xxx
JR東海   株主優待1割   | ¥x,xxx
JR東海   株主優待2割   | ¥x,xxx
```

### 小児運賃

往復なし:
```
小児運賃              | ¥x,xxx
```

往復あり:
```
小児運賃              | ¥x,xxx   | 往復          | ¥x,xxx
```

### 学割運賃（片道営業キロ ≥ 101km の場合のみ表示）

往復なし:
```
学割運賃              | ¥x,xxx
```

往復あり:
```
学割運賃              | ¥x,xxx   | 往復          | ¥x,xxx
```

## セクション4: 備考（条件付き表示）

特記事項がある場合にメッセージを表示:
- 近郊区間内の最短経路利用
- BRT乗継ぎ割引適用
- その他の注記

## セクション5: 有効日数

### タイトル行
- 背景色: サブタイトルバー色
- 太字表示: "有効日数"

### 値行1
```
x日間
```

### 値行2（途中下車情報）

片道営業キロ ≥ 101km の場合:
```
(途中下車可能)
```

発着駅が都区市内駅の場合:
```
(発駅都区市内の駅を除き途中下車可能)
(着駅都区市内の駅を除き途中下車可能)
(発着駅都区市内の駅を除き途中下車可能)
```

片道営業キロ < 101km の場合:
```
(途中下車前途無効)
```

近郊区間内の場合:
```
近郊区間内ですので最安運賃の経路にしました(途中下車不可、有効日数当日限り)
```

## セクション6: 経由

### タイトル行
- 背景色: サブタイトルバー色
- 太字表示: "経由"

### 値行（経路リスト）

複数行にわたる経路文字列を表示（例: _[東海道線]熱海[身延線]甲府_）:
```
[路線名]駅名[路線名]駅名[路線名]...
```

### IC運賃計算経路（条件付き・2行目）

IC運賃の経路が普通運賃と異なる場合（例: _[東海道線]熱海[東海道線]三島[身延線]甲府_）:
```
＜IC運賃計算経路＞
[路線名]駅名[路線名]駅名[路線名]...
```

## ナビゲーションバー

### タイトル
- メインタイトル: 着駅名（例: _熱海_）
- サブタイトル（prompt）: 発駅名 →（例: _東京 →_）

### 右上ボタン

1. `オプション変更`ボタン（レンチアイコン等）
   - タップでオプションメニュー表示
   - 無効時はグレーアウト

2. `共有`ボタン（アクションアイコン）
   - タップでシステム共有シートを表示
   - コピー、メール、AirDropなどで共有可能

## オプションメニュー内容（条件付き表示）

- `特例を適用する` / `特例を適用しない`
- `発駅を単駅指定` / `着駅を単駅指定`
- `指定した経路で運賃計算` / `最安経路で運賃計算`
- `旅客営業取扱基準規程115条（単駅最安）` / `旅客営業取扱基準規程115条（特定都区市内発着）`

## エラー表示

経路が不完全または無効な場合:
```
無効な経路
経路が不完全です.続けて指定してください
会社線のみ運賃は表示できません
```

## 表示例

```
東京 → 甲府
経由：[東海道線]富士[身延線]
営業キロ： 130.0 km     計算キロ： 138.8 km
運賃： ¥2,310       往復： ¥4,620
JR東海   株主優待1割： ¥2,070
JR東海   株主優待2割： ¥1,840
小児運賃： ¥1,150   往復： ¥2,300
学割運賃： ¥1,840   往復： ¥3,680

有効日数：   2日
途中下車できます
```
