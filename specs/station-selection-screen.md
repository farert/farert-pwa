# 発駅選択画面の詳細仕様

## 画面タイトル

- 発駅選択
- 着駅選択(最短経路)

## レイアウト構成

### 1行目

- センタリングでタイトル表示

### 2行目（タブバー）

- **左端**: 「戻る」ボタン
- **中央**: タブ（センタリング）
  - グループ | 都道府県 | 履歴
- **右端**: 「編集」ボタン（履歴選択時のみ有効）

### 3行目（検索バー）

- 検索アイコン + テキスト入力バー

### 4行目以降（リスト表示エリア）

タブに応じて内容が切り替わる

## タブ別の表示内容

### グループタブ

- JRグループ会社名を6行表示
- 選択 → 路線一覧表示 → 駅一覧表示 → 駅選択 → メイン画面へ戻る

### 都道府県タブ

- 都道府県を46行表示（沖縄を除く）
- 選択 → 路線一覧表示 → 駅一覧表示 → 駅選択 → メイン画面へ戻る

### 履歴タブ

- 過去に選択した駅を最近順に表示
- webストレージに保存
- 駅を選択 → メイン画面へ戻る

#### 履歴の編集モード

「編集」をタップ時:

- 駅一覧の左端に⛔️（侵入禁止マーク）アイコン表示
- アイコンタップで削除可能
- **画面最下部**:
  - 「クリア」ボタン: 全消去
  - Undoアイコン: 削除の取り消し

## 検索機能

### 検索バークリック時の動作

1. 検索バーが1行目に移動
2. 右端に✖️アイコンが表示される
3. 検索文字を入力すると駅が絞り込まれる
4. 一致件数と一致した駅一覧を表示

### 検索結果の表示形式

```
駅名
ひらがな (都道府県)
```

### 検索からの選択

- 駅を選択 → 戻り値としてメイン画面へ
- ✖️をタップ → タブ表示に戻る

## データソース

- 路線、都道府県、グループはWASMモジュールから取得
- 開発時は仮のスタブを利用

---

# 路線選択画面の詳細仕様

## レイアウト

- **リストタイトル**: グループ名または都道府県名
- **リスト**: 路線名を列挙

## 動作

- 路線を選択 → 駅選択画面へ遷移

---

# 駅選択画面の詳細仕様

## レイアウト

- **リストタイトル**: グループ名または都道府県 - 路線名
- **リスト表示形式**:

```
駅名
(ひらがな) / 所属路線 / 所属路線…
```

## 動作

- 駅を選択 → 戻り値としてメイン画面へ

---

# 追加(経路追加)画面の詳細仕様

## 画面タイトル

- 「路線」

## レイアウト

### 1行目

- **左端**: 戻る
- **右端**: 最短経路

### 2行目以降

- **リストタイトル**: 駅名（メイン画面で選択された着駅）
- **リスト**: 駅の所属する路線名を列挙

## 動作

### 最短経路をタップ

- 発駅選択と同様の画面を表示

### 路線を選択

- 駅選択画面へ遷移

---

# 駅選択画面（経路追加用）の詳細仕様

## 画面タイトル

- 初期状態: 「分岐駅選択」
- 切り替え後: 「着駅選択」

## ヘッダー部

- **左端**: 戻る
- **中央**: 画面タイトル（分岐駅選択 / 着駅選択）
- **右端**: 着駅選択 / 分岐駅選択（トグル切り替えボタン）

## リスト表示

- **リストタイトル**: 前画面で選択した路線名
- **リスト表示形式**:

```
駅名
(ひらがな) / 所属路線 / 所属路線…
```

### 分岐駅選択モード

- メイン画面の前経路の着駅（この路線の発駅）と一致した駅の行を**反転表示**し、選択不可にする

### 着駅選択モード

右端の「着駅選択」をタップ時:

- 画面タイトルが「着駅選択」に切り替わる
- 分岐駅以外の全駅を表示
- リスト内容は分岐駅選択と同じ
- 右端のボタンは「分岐駅選択」表示に変わり、交互に切り替え可能

## 駅選択時の動作

- 選択した駅と前に選択した路線を戻り値としてメイン画面へ戻る
